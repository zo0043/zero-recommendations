<!DOCTYPE html>
<html>
<head>
	<meta charset="UTF-8">
	<title>搜索推荐词采集助手</title>
	<link rel="stylesheet" href="css/theme.css">
	<link rel="stylesheet" href="css/popup.css">
	<link rel="stylesheet" href="css/preview-panel.css">
	<style>
		body {
			width: 350px;
			min-height: 300px;
			padding: 1rem;
		}
		
		.container {
			max-width: 100%;
			padding: 0.5rem;
		}
		
		.header {
			display: flex;
			align-items: center;
			margin-bottom: 1.5rem;
		}
		
		.header-icon {
			width: 24px;
			height: 24px;
			margin-right: 0.75rem;
		}
		
		.header-title {
			font-size: 1.25rem;
			font-weight: 600;
			color: var(--primary-dark);
			margin: 0;
		}
		
		.page {
			transition: transform var(--transition-normal), opacity var(--transition-normal);
		}
		
		#inputPage {
			opacity: 1;
		}
		
		#resultsPage {
			height: auto;
			max-height: 450px;
			overflow-y: auto;
			display: none;
			opacity: 0;
		}
		
		.input-field {
			margin-bottom: 1.25rem;
		}
		
		.input-field textarea {
			width: 100%;
			resize: vertical;
			min-height: 80px;
			margin-bottom: 0.75rem;
			border-radius: var(--radius-md);
			padding: 0.75rem;
			background-color: var(--bg-card);
			border: 1px solid var(--border-color);
			box-shadow: var(--shadow-sm);
			transition: all var(--transition-fast);
		}
		
		.input-field textarea:focus {
			box-shadow: 0 0 0 2px rgba(59, 130, 246, 0.3);
		}
		
		#submit, #pga_submit {
			width: 100%;
			padding: 0.75rem;
			font-weight: 600;
			border-radius: var(--radius-md);
			background-color: var(--primary-color);
			color: white;
			transition: all var(--transition-fast);
		}
		
		#submit:hover, #pga_submit:hover {
			background-color: var(--primary-hover);
			transform: translateY(-1px);
		}
		
		.input-container {
			margin-bottom: 1.25rem;
			padding: 0.75rem;
			border-radius: var(--radius-md);
			background-color: var(--bg-card);
			border: 1px solid var(--border-color);
		}
		
		.input-container .label {
			display: block;
			margin-bottom: 0.5rem;
			font-weight: 500;
			color: var(--text-color);
		}
		
		.input-wrapper {
			display: flex;
			gap: 0.75rem;
		}
		
		.input-wrapper input[type="radio"] {
			margin-right: 0.25rem;
		}
		
		#extraction-status {
			margin-top: 1rem !important;
			padding: 0.75rem;
			border-radius: var(--radius-md);
			background-color: rgba(59, 130, 246, 0.1);
			color: var(--primary-color);
			text-align: center;
			display: flex;
			align-items: center;
			justify-content: center;
		}
		
		#status-text {
			margin-left: 0.5rem;
		}
		
		#extraction-status::before {
			content: '';
			display: inline-block;
			width: 1rem;
			height: 1rem;
			border: 2px solid rgba(59, 130, 246, 0.3);
			border-radius: 50%;
			border-top-color: var(--primary-color);
			animation: spin 1s infinite linear;
		}
		
		/* 结果页面样式 */
		#resultsPage h3 {
			margin-top: 0;
			margin-bottom: 1rem;
			color: var(--primary-dark);
			font-weight: 600;
		}
		
		.level-info, .keywords-container {
			margin-bottom: 1rem;
		}
		
		.keywords-list {
			max-height: 250px;
			overflow-y: auto;
			margin: 0.75rem 0;
			padding: 0.5rem;
			border-radius: var(--radius-md);
			background-color: var(--bg-card);
			border: 1px solid var(--border-color);
		}
		
		.keyword-item {
			padding: 0.5rem;
			margin-bottom: 0.5rem;
			border-radius: var(--radius-sm);
			background-color: rgba(59, 130, 246, 0.05);
			border-left: 3px solid var(--primary-color);
			transition: all var(--transition-fast);
		}
		
		.keyword-item:hover {
			transform: translateX(2px);
			background-color: rgba(59, 130, 246, 0.1);
		}
		
		.preview-actions {
			display: flex;
			gap: 0.5rem;
			flex-wrap: wrap;
		}
		
		.preview-btn {
			flex: 1;
			min-width: 100px;
		}
		
		.back-to-input {
			width: 100%;
			margin-top: 0.75rem;
			background-color: var(--bg-card);
			color: var(--text-color);
			border: 1px solid var(--border-color);
		}
		
		.back-to-input:hover {
			background-color: var(--border-color);
		}
		
		/* 弹窗样式 */
		.custom-popup {
			display: none;
			position: fixed;
			top: 0;
			left: 0;
			width: 100%;
			height: 100%;
			z-index: 1000;
		}
		
		.custom-popup-overlay {
			position: absolute;
			top: 0;
			left: 0;
			width: 100%;
			height: 100%;
			background-color: rgba(0, 0, 0, 0.5);
			backdrop-filter: blur(3px);
		}
		
		.custom-popup-content {
			position: absolute;
			top: 50%;
			left: 50%;
			transform: translate(-50%, -50%);
			background-color: var(--bg-card);
			padding: 1.5rem;
			border-radius: var(--radius-md);
			box-shadow: var(--shadow-lg);
			max-width: 80%;
			text-align: center;
		}
		
		.custom-popup-question {
			display: block;
			margin-bottom: 1rem;
			font-weight: 500;
		}
		
		.custom-popup-close-btn {
			padding: 0.5rem 1.5rem;
		}
	</style>
</head>
<body>
<div class="container">
	<div class="header">
		<img src="icon48.png" alt="Logo" class="header-icon">
		<h1 class="header-title">搜索推荐词采集助手</h1>
	</div>

	<!-- 输入页面 -->
	<div id="inputPage" class="page">
		<div id="pageSearchKeywords" class="input-field tech-container">
			<textarea id="keywords" placeholder="请输入关键词,支持换行输入多关键词,关键词出现占位符{c},自动替换为[A-Z]的推荐词搜索，当前支持抖音、小红书、B站、知乎、百度、google"></textarea>
			<button id="submit" class="pulse">提取推荐词</button>
			<div id="extraction-status" style="display: none;" class="pulse">
				<span id="status-text">提取中...</span>
			</div>
		</div>

		<div class="input-container">
			<label for="mKey" class="label">采集层级:</label>
			<div class="input-wrapper">
				<div>
					<input type="radio" id="level1" checked name="level" value="1">
					<label for="level1">1级</label>
					<input type="radio" id="level2" name="level" value="2">
					<label for="level2">2级</label>
					<input type="radio" id="level3" name="level" value="3">
					<label for="level3">3级</label>
				</div>
			</div>
		</div>

		<div id="pageGptArticle" class="input-field tech-container" style="display: none">
			<textarea id="pga_keywords" placeholder="请输入文章主题关键词或采集地址，多个请换行"></textarea>
			<button id="pga_submit" class="pulse">添加关键词</button>
		</div>
	</div>

	<!-- 结果页面 -->
	<div id="resultsPage" class="page">
		<h3>采集结果</h3>
		<div class="level-info">
			<strong>采集层级：</strong><span id="result-level" class="badge badge-info"></span>
		</div>
		<div class="keywords-container">
			<strong>搜索推荐词：</strong>
			<div id="result-keywords-list" class="keywords-list"></div>
		</div>
		<div class="preview-actions">
			<button id="export-csv" class="preview-btn">导出CSV</button>
			<button id="export-mindmap" class="preview-btn">导出思维导图</button>
			<button class="back-to-input">返回输入页面</button>
		</div>
	</div>

	<div id="popup" class="custom-popup">
		<div class="custom-popup-overlay"></div>
		<div class="custom-popup-content">
			<span id="message" class="custom-popup-question"></span>
			<button id="closePopupBtn" class="custom-popup-close-btn">确认</button>
		</div>
	</div>
</div>
<script type="text/javascript" src="js/jquery.min.js"></script>
<script type="text/javascript" src="js/preview-panel.js"></script>
<script type="text/javascript" src="js/popup.js"></script>
</body>
</html>